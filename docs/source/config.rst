.. _config-settings:

Configuration settings
======================

Additional configuration is not required to run ``nvtest``.  To see the current configuration, issue

.. code-block:: console

   nvtest config show

Configuration variables can be set on the command line or read from a configuration file.

.. _config-file:

Configuration file
------------------

In addition to the command line, configuration variables can be explicitly set in:

- ``~/.nvtest``.
- ``./nvtest.cfg``

``~/.nvtest`` is the "global" configuration scope while ``./nvtest.cfg`` is the "local" configuration scope.  The order of precedence for configuration scopes is

1. Command line
2. Local configuration
3. Global configuration

.. note::

   There is also a "session" configuration scope that is written when a test session is created.  The values therein are set by the local configuration when the session is launched and take precedence in future invocations.

.. code-block:: ini

   [config]
   debug = false
   log_level = int
   test_files = r"^[a-zA-Z_]\w*\.(pyt|vvt)$"  # regular expression for test file names

   [variables]
   var = str  # environment variables to set for the test session

   [machine]
   sockets_per_node = 1
   cores_per_socket = N  # default computed from os.cpu_count()
   cpu_count = N  # default computed from os.cpu_count()

   [build]
   type = str
   date = str

   [build:compiler]
   vendor = str
   version = str

   [build:compiler:paths]
   cc = str
   cxx = str
   fc = str

   [build:options]
   opt = str

.. note::

   The build configuration fields should be generated by :ref:`nvtest's CMake integration <cmake-integration>`.

Setting configuration variables on the command line
---------------------------------------------------

Use yaml path syntax to set any of the above variables.  For example,

.. code-block:: console

   nvtest -c machine:cpu_count:20 -c config:log_level:0 SUBCOMMAND [OPTIONS] ARGUMENTS

To set environment variables do

.. code-block:: console

   nvtest -e VAR1=VAL1 -e VAR2=VAL2 SUBCOMMAND [OPTIONS] ARGUMENTS
